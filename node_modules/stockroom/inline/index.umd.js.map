{"version":3,"file":"index.umd.js","sources":["../src/inline.js"],"sourcesContent":["/** Used to run your whole store on the main thread.\n *\tUseful non-worker environments or as a fallback.\n *\t@name module:stockroom/inline\n */\nlet inline; // eslint-disable-line\n\n/** For SSR/prerendering, pass your exported worker store through this enhancer\n *  to make an inline synchronous version that runs in the same thread.\n *\t@memberof module:stockroom/inline\n *  @param {WorkerStore} workerStore\tThe exported `store` instance that would have been invoked in a Worker\n *  @returns {Store} inlineStore - a unistore instance with centralized actions\n *\t@example\n *\tlet store\n *\tif (SUPPORTS_WEB_WORKERS) {\n *\t\tlet createStore = require('stockroom/inline')\n *\t\tstore = createStore(require('./store.worker'))\n *\t}\n *\telse {\n *\t\tlet createStore = require('stockroom')\n *\t\tlet StoreWorker = require('worker-loader!./store.worker')\n *\t\tstore = createStore(new StoreWorker())\n *\t}\n *\texport default store\n */\nexport default function createInlineStore(workerStore) {\n\tlet notEvent = e => typeof Event!=='function' || !(e instanceof Event);\n\n\tworkerStore.action = actionCreator => (...params) => {\n\t\tlet action = typeof actionCreator==='function' ? actionCreator(...params) : actionCreator;\n\t\tif (typeof action==='string') action = { type: action, params: params.filter(notEvent) };\n\t\tif (action && !action.type) {\n\t\t\tworkerStore.setState(action, false, actionCreator.name, true);\n\t\t}\n\t\telse {\n\t\t\tworkerStore.actions[action.type](...(action.params || [action.payload]));\n\t\t}\n\t};\n\treturn workerStore;\n}\n"],"names":["workerStore","let","notEvent","e","Event","action","actionCreator","params","type","filter","setState","name","actions","ref","payload"],"mappings":"+KAwBe,SAA2BA,GACzCC,IAAIC,WAAWC,SAAoB,mBAARC,SAAwBD,aAAaC,QAYhE,OAVAJ,EAAYK,gBAASC,4EACpBL,MAAII,EAAgC,mBAAhBC,EAA6BA,aAAc,EAAGC,GAAUD,EACxD,iBAATD,IAAmBA,GAAWG,KAAMH,EAAQE,OAAQA,EAAOE,OAAOP,KACzEG,IAAWA,EAAOG,KACrBR,EAAYU,SAASL,GAAQ,EAAOC,EAAcK,MAAM,MAGxDX,EAAYY,SAAQP,EAAOG,YAAMK,EAAIR,EAAOE,SAAWF,EAAOS,YAGzDd"}