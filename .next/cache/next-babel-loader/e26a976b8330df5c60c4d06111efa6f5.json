{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { Chart } from 'primereact/chart';\nimport moment from 'moment';\nexport default function trader({\n  pair,\n  data,\n  store\n}) {\n  const lastPrices = store.ticks.map(tick => {\n    return {\n      y: tick.pairs[pair].c[0],\n      x: moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n    };\n  });\n  const transactions = Object.values(store.closedTransactions).filter(t => {\n    var _store$assetPairs$pai;\n\n    return t.descr.pair === ((_store$assetPairs$pai = store.assetPairs[pair]) === null || _store$assetPairs$pai === void 0 ? void 0 : _store$assetPairs$pai.altname);\n  }).map(t => _objectSpread(_objectSpread({}, t.descr), {}, {\n    status: t.status,\n    volume: t.vol,\n    cost: t.cost,\n    fee: t.fee,\n    time: t.opentm\n  }));\n  const sellData = transactions.filter(t => t.type === \"sell\" && t.status === \"closed\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const buyData = transactions.filter(t => t.type === \"buy\" && t.status === \"closed\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const sellDataExpired = transactions.filter(t => t.type === \"sell\" && t.status === \"expired\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const buyDataExpired = transactions.filter(t => t.type === \"buy\" && t.status === \"expired\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const labels = [...store.ticks.map(tick => tick.timestamp), ...transactions.map(t => t.time)].sort().map(l => moment.unix(l).format(\"HH:mm:ss\"));\n  const basicData = {\n    labels: labels,\n    datasets: [{\n      label: 'price',\n      data: lastPrices,\n      fill: false,\n      borderColor: '#42A5F5'\n    }, {\n      label: 'buy',\n      data: buyData,\n      showLine: false,\n      pointBorderWidth: 7,\n      fill: false,\n      borderColor: '#10a366'\n    }, {\n      label: 'sell',\n      showLine: false,\n      pointBorderWidth: 7,\n      data: sellData,\n      fill: false,\n      borderColor: '#a31510'\n    }, {\n      label: 'expired sell',\n      showLine: false,\n      pointBorderWidth: 6,\n      data: sellDataExpired,\n      fill: false,\n      borderStyle: 'cross',\n      borderColor: '#a31510'\n    }, {\n      label: 'expired buy',\n      showLine: false,\n      pointBorderWidth: 6,\n      data: buyDataExpired,\n      fill: false,\n      borderStyle: 'cross',\n      borderColor: '#10a366'\n    }]\n  };\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Chart, {\n      type: \"line\",\n      data: basicData,\n      style: {\n        height: 200\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        animation: {\n          duration: 0\n        }\n      }\n    })\n  });\n}","map":{"version":3,"sources":["/home/mjl/makeMeRich/src/ui/trader.tsx"],"names":["React","Chart","moment","trader","pair","data","store","lastPrices","ticks","map","tick","y","pairs","c","x","unix","timestamp","format","transactions","Object","values","closedTransactions","filter","t","descr","assetPairs","altname","status","volume","vol","cost","fee","time","opentm","sellData","type","price","buyData","sellDataExpired","buyDataExpired","labels","sort","l","basicData","datasets","label","fill","borderColor","showLine","pointBorderWidth","borderStyle","height","responsive","maintainAspectRatio","animation","duration"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Chart } from 'primereact/chart'\nimport moment from 'moment'\nexport default function trader({pair,data,store}:{pair:string, data:any ,store:IState}){\n    const lastPrices = store.ticks.map((tick:ITick)=>{\n        return {\n            y:tick.pairs[pair].c[0],\n            x:moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n        }\n    })\n    const transactions = Object.values(store.closedTransactions)\n\n    .filter(t=>t.descr.pair===store.assetPairs[pair]?.altname)\n    .map(t=>({\n            ...t.descr,\n            status:t.status,\n            volume:t.vol,\n            cost:t.cost,\n            fee:t.fee,\n            time:t.opentm\n            \n        })\n    )\n    const sellData = transactions\n    .filter(t=>t.type===\"sell\" && t.status===\"closed\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyData = transactions\n    .filter(t=>t.type===\"buy\" && t.status===\"closed\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const sellDataExpired = transactions\n    .filter(t=>t.type===\"sell\" && t.status===\"expired\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyDataExpired = transactions\n    .filter(t=>t.type===\"buy\" && t.status===\"expired\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const labels = [ ...store.ticks.map(tick=>tick.timestamp), ...transactions.map(t=>t.time) ].sort().map(l=>moment.unix(l).format(\"HH:mm:ss\"))\n    const basicData = {\n        \n       labels:labels,\n        datasets: [\n            {\n                label: 'price',\n                data:lastPrices,\n                fill: false,\n                borderColor: '#42A5F5'\n            },\n            {\n                label: 'buy',\n                data:buyData,\n                showLine:false,\n                pointBorderWidth:7,\n                fill: false,\n                borderColor: '#10a366'\n            },\n            {\n                label: 'sell',\n                showLine:false,\n                pointBorderWidth:7,\n                data:sellData,\n                fill: false,\n                borderColor: '#a31510'\n            },\n            {\n                label: 'expired sell',\n                showLine:false,\n                pointBorderWidth:6,\n                data:sellDataExpired,\n                fill: false,\n                borderStyle:'cross',\n                borderColor: '#a31510'\n            },\n            {\n                label: 'expired buy',\n                showLine:false,\n                pointBorderWidth:6,\n                data:buyDataExpired,\n                fill: false,\n                borderStyle:'cross',\n                borderColor: '#10a366'\n            },\n           \n        ]\n    }\n    return <>\n   <Chart   type=\"line\" data={basicData} style={{height:200}} options={{\n       responsive:true,  maintainAspectRatio: false,\n    animation:{\n        duration:0\n    }\n}} />\n\n    \n    </>\n}"]},"metadata":{},"sourceType":"module"}