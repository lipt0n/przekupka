{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Chart } from 'primereact/chart';\nimport moment from 'moment';\nexport default function trader(_ref) {\n  var pair = _ref.pair,\n      data = _ref.data,\n      store = _ref.store;\n  var lastPrices = store.ticks.map(function (tick) {\n    return {\n      y: tick.pairs[pair].c[0],\n      x: moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n    };\n  });\n  var transactions = Object.values(store.closedTransactions).filter(function (t) {\n    var _store$assetPairs$pai;\n\n    return t.descr.pair === ((_store$assetPairs$pai = store.assetPairs[pair]) === null || _store$assetPairs$pai === void 0 ? void 0 : _store$assetPairs$pai.altname);\n  }).map(function (t) {\n    return _objectSpread(_objectSpread({}, t.descr), {}, {\n      status: t.status,\n      volume: t.vol,\n      cost: t.cost,\n      fee: t.fee,\n      time: t.opentm\n    });\n  });\n  var sellData = transactions.filter(function (t) {\n    return t.type === \"sell\";\n  }).map(function (t) {\n    return {\n      y: t.price,\n      x: moment.unix(t.time).format(\"HH:mm:ss\")\n    };\n  });\n  var buyData = transactions.filter(function (t) {\n    return t.type === \"buy\";\n  }).map(function (t) {\n    return {\n      y: t.price,\n      x: moment.unix(t.time).format(\"HH:mm:ss\")\n    };\n  });\n  var labels = [].concat(_toConsumableArray(store.ticks.map(function (tick) {\n    return tick.timestamp;\n  })), _toConsumableArray(transactions.map(function (t) {\n    return t.time;\n  }))).sort().map(function (l) {\n    return moment.unix(l).format(\"HH:mm:ss\");\n  });\n  var basicData = {\n    labels: labels,\n    datasets: [{\n      label: 'price',\n      data: lastPrices,\n      fill: false,\n      borderColor: '#42A5F5'\n    }, {\n      label: 'buy',\n      data: buyData,\n      showLine: false,\n      pointBorderWidth: 7,\n      fill: false,\n      borderColor: '#10a366'\n    }, {\n      label: 'sell',\n      showLine: false,\n      pointBorderWidth: 7,\n      data: sellData,\n      fill: false,\n      borderColor: '#a31510'\n    }]\n  };\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Chart, {\n      type: \"line\",\n      data: basicData,\n      style: {\n        height: 200\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false\n      }\n    })\n  });\n}","map":{"version":3,"sources":["/home/mjl/makeMeRich/src/ui/trader.tsx"],"names":["React","Chart","moment","trader","pair","data","store","lastPrices","ticks","map","tick","y","pairs","c","x","unix","timestamp","format","transactions","Object","values","closedTransactions","filter","t","descr","assetPairs","altname","status","volume","vol","cost","fee","time","opentm","sellData","type","price","buyData","labels","sort","l","basicData","datasets","label","fill","borderColor","showLine","pointBorderWidth","height","responsive","maintainAspectRatio"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Chart } from 'primereact/chart'\nimport moment from 'moment'\nexport default function trader({pair,data,store}:{pair:string, data:any ,store:IState}){\n    const lastPrices = store.ticks.map((tick:ITick)=>{\n        return {\n            y:tick.pairs[pair].c[0],\n            x:moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n        }\n    })\n    const transactions = Object.values(store.closedTransactions)\n\n    .filter(t=>t.descr.pair===store.assetPairs[pair]?.altname)\n    .map(t=>({\n            ...t.descr,\n            status:t.status,\n            volume:t.vol,\n            cost:t.cost,\n            fee:t.fee,\n            time:t.opentm\n            \n        })\n    )\n    const sellData = transactions\n    .filter(t=>t.type===\"sell\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyData = transactions\n    .filter(t=>t.type===\"buy\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const labels = [ ...store.ticks.map(tick=>tick.timestamp), ...transactions.map(t=>t.time) ].sort().map(l=>moment.unix(l).format(\"HH:mm:ss\"))\n    const basicData = {\n        \n       labels:labels,\n        datasets: [\n            {\n                label: 'price',\n                data:lastPrices,\n                fill: false,\n                borderColor: '#42A5F5'\n            },\n            {\n                label: 'buy',\n                data:buyData,\n                showLine:false,\n                pointBorderWidth:7,\n                fill: false,\n                borderColor: '#10a366'\n            },\n            {\n                label: 'sell',\n                showLine:false,\n                pointBorderWidth:7,\n                data:sellData,\n                fill: false,\n                borderColor: '#a31510'\n            },\n           \n        ]\n    }\n    return <>\n   <Chart   type=\"line\" data={basicData} style={{height:200}} options={{\n       responsive:true,  maintainAspectRatio: false,\n\n}} />\n\n    \n    </>\n}"]},"metadata":{},"sourceType":"module"}