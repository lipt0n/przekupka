{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Chart } from 'primereact/chart';\nimport moment from 'moment';\nimport Transactions from './transactions';\nexport default function trader(_ref) {\n  var pair = _ref.pair,\n      data = _ref.data,\n      store = _ref.store;\n  var lastPrices = store.ticks.map(function (tick) {\n    console.log(tick);\n    return {\n      y: tick.pairs[pair].c[0],\n      x: moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n    };\n  });\n  var transactions = Object.values(store.closedTransactions).filter(function (t) {\n    return t.descr.pair === store.assetPairs[pair].altname;\n  }).map(function (t) {\n    return _objectSpread(_objectSpread({}, t.descr), {}, {\n      status: t.status,\n      volume: t.vol,\n      cost: t.cost,\n      fee: t.fee,\n      time: t.opentm,\n      date: moment.unix(t.opentm).format(\"YYYY-MM-DD HH:mm:ss\")\n    });\n  }).sort(function (a, b) {\n    return b.time - a.time;\n  });\n  var sellData = transactions.filter(function (t) {\n    return t.type === \"sell\" && t.status === \"closed\";\n  }).map(function (t) {\n    return {\n      y: t.price,\n      x: moment.unix(t.time).format(\"HH:mm:ss\")\n    };\n  });\n  var buyData = transactions.filter(function (t) {\n    return t.type === \"buy\" && t.status === \"closed\";\n  }).map(function (t) {\n    return {\n      y: t.price,\n      x: moment.unix(t.time).format(\"HH:mm:ss\")\n    };\n  });\n  var sellDataExpired = transactions.filter(function (t) {\n    return t.type === \"sell\" && t.status === \"expired\";\n  }).map(function (t) {\n    return {\n      y: t.price,\n      x: moment.unix(t.time).format(\"HH:mm:ss\")\n    };\n  });\n  var buyDataExpired = transactions.filter(function (t) {\n    return t.type === \"buy\" && t.status === \"expired\";\n  }).map(function (t) {\n    return {\n      y: t.price,\n      x: moment.unix(t.time).format(\"HH:mm:ss\")\n    };\n  });\n  var labels = [].concat(_toConsumableArray(store.ticks.map(function (tick) {\n    return tick.timestamp;\n  })), _toConsumableArray(transactions.map(function (t) {\n    return t.time;\n  }))).sort().map(function (l) {\n    return moment.unix(l).format(\"HH:mm:ss\");\n  });\n  var basicData = {\n    labels: labels,\n    datasets: [{\n      label: 'price',\n      data: lastPrices,\n      fill: false,\n      borderColor: '#42A5F5'\n    }, {\n      label: 'buy',\n      data: buyData,\n      showLine: false,\n      pointBorderWidth: 7,\n      fill: false,\n      borderColor: '#10a366'\n    }, {\n      label: 'sell',\n      showLine: false,\n      pointBorderWidth: 7,\n      data: sellData,\n      fill: false,\n      borderColor: '#a31510'\n    }, {\n      label: 'expired sell',\n      showLine: false,\n      pointBorderWidth: 1,\n      data: sellDataExpired,\n      fill: false,\n      radius: 5,\n      borderStyle: 'cross',\n      borderColor: '#a31510'\n    }, {\n      label: 'expired buy',\n      showLine: false,\n      pointBorderWidth: 1,\n      radius: 5,\n      data: buyDataExpired,\n      fill: false,\n      borderStyle: 'cross',\n      borderColor: '#10a366'\n    }]\n  };\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Chart, {\n      type: \"line\",\n      data: basicData,\n      style: {\n        height: 200\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        animation: {\n          duration: 0\n        }\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"p-d-flex\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"p-mr-2\",\n        children: /*#__PURE__*/_jsx(Transactions, {\n          transactions: transactions\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"p-mr-2\",\n        children: \"Item 2\"\n      })]\n    })]\n  });\n}","map":{"version":3,"sources":["/home/mjl/makeMeRich/src/ui/trader.tsx"],"names":["React","Chart","moment","Transactions","trader","pair","data","store","lastPrices","ticks","map","tick","console","log","y","pairs","c","x","unix","timestamp","format","transactions","Object","values","closedTransactions","filter","t","descr","assetPairs","altname","status","volume","vol","cost","fee","time","opentm","date","sort","a","b","sellData","type","price","buyData","sellDataExpired","buyDataExpired","labels","l","basicData","datasets","label","fill","borderColor","showLine","pointBorderWidth","radius","borderStyle","height","responsive","maintainAspectRatio","animation","duration"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Chart } from 'primereact/chart'\nimport moment from 'moment'\nimport Transactions from './transactions'\nexport default function trader({pair,data,store}:{pair:string, data:any ,store:IState}){\n    const lastPrices = store.ticks.map((tick:ITick)=>{\n        console.log(tick)\n        return {\n            y:tick.pairs[pair].c[0],\n            x:moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n        }\n    })\n    const transactions = Object.values(store.closedTransactions)\n\n    .filter(t=>t.descr.pair===store.assetPairs[pair].altname)\n    .map(t=>({\n            ...t.descr,\n            status:t.status,\n            volume:t.vol,\n            cost:t.cost,\n            fee:t.fee,\n            time:t.opentm,\n            date:moment.unix(t.opentm).format(\"YYYY-MM-DD HH:mm:ss\")\n            \n        })\n    ).sort((a,b)=>b.time-a.time)\n    const sellData = transactions\n    .filter(t=>t.type===\"sell\" && t.status===\"closed\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyData = transactions\n    .filter(t=>t.type===\"buy\" && t.status===\"closed\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const sellDataExpired = transactions\n    .filter(t=>t.type===\"sell\" && t.status===\"expired\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyDataExpired = transactions\n    .filter(t=>t.type===\"buy\" && t.status===\"expired\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const labels = [ ...store.ticks.map(tick=>tick.timestamp), ...transactions.map(t=>t.time) ].sort().map(l=>moment.unix(l).format(\"HH:mm:ss\"))\n    const basicData = {\n        \n       labels:labels,\n        datasets: [\n            {\n                label: 'price',\n                data:lastPrices,\n                fill: false,\n                borderColor: '#42A5F5'\n            },\n            {\n                label: 'buy',\n                data:buyData,\n                showLine:false,\n                pointBorderWidth:7,\n                fill: false,\n                borderColor: '#10a366'\n            },\n            {\n                label: 'sell',\n                showLine:false,\n                pointBorderWidth:7,\n                data:sellData,\n                fill: false,\n                borderColor: '#a31510'\n            },\n            {\n                label: 'expired sell',\n                showLine:false,\n                pointBorderWidth:1,\n                data:sellDataExpired,\n                fill: false,\n                radius:5,\n\n                borderStyle:'cross',\n                borderColor: '#a31510'\n            },\n            {\n                label: 'expired buy',\n                showLine:false,\n                pointBorderWidth:1,\n                radius:5,\n                data:buyDataExpired,\n                fill: false,\n                borderStyle:'cross',\n                borderColor: '#10a366'\n            },\n           \n        ]\n    }\n    return <>\n   <Chart   type=\"line\" data={basicData} style={{height:200}} options={{\n       responsive:true,  maintainAspectRatio: false,\n    animation:{\n        duration:0\n    }\n}} />\n<div className=\"p-d-flex\">\n<div className=\"p-mr-2\"><Transactions transactions={transactions}/></div>\n    <div className=\"p-mr-2\">Item 2</div>\n</div>\n\n    \n    </>\n}"]},"metadata":{},"sourceType":"module"}