{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { Chart } from 'primereact/chart';\nimport moment from 'moment';\nimport Transactions from './transactions';\nexport default function trader({\n  pair,\n  data,\n  store\n}) {\n  const lastPrices = store.ticks.map(tick => {\n    console.log(tick);\n    return {\n      y: tick.pairs[pair].c[0],\n      x: moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n    };\n  });\n  const transactions = Object.values(store.closedTransactions).filter(t => t.descr.pair === store.assetPairs[pair].altname).map(t => _objectSpread(_objectSpread({}, t.descr), {}, {\n    status: t.status,\n    volume: t.vol,\n    cost: t.cost,\n    fee: t.fee,\n    time: t.opentm,\n    date: moment.unix(t.opentm).format(\"YYYY-MM-DD HH:mm:ss\")\n  })).sort((a, b) => b.time - a.time);\n  const sellData = transactions.filter(t => t.type === \"sell\" && t.status === \"closed\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const buyData = transactions.filter(t => t.type === \"buy\" && t.status === \"closed\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const sellDataExpired = transactions.filter(t => t.type === \"sell\" && t.status === \"expired\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const buyDataExpired = transactions.filter(t => t.type === \"buy\" && t.status === \"expired\").map(t => ({\n    y: t.price,\n    x: moment.unix(t.time).format(\"HH:mm:ss\")\n  }));\n  const labels = [...store.ticks.map(tick => tick.timestamp), ...transactions.map(t => t.time)].sort().map(l => moment.unix(l).format(\"HH:mm:ss\"));\n  const basicData = {\n    labels: labels,\n    datasets: [{\n      label: 'price',\n      data: lastPrices,\n      fill: false,\n      borderColor: '#42A5F5'\n    }, {\n      label: 'buy',\n      data: buyData,\n      showLine: false,\n      pointBorderWidth: 7,\n      fill: false,\n      borderColor: '#10a366'\n    }, {\n      label: 'sell',\n      showLine: false,\n      pointBorderWidth: 7,\n      data: sellData,\n      fill: false,\n      borderColor: '#a31510'\n    }, {\n      label: 'expired sell',\n      showLine: false,\n      pointBorderWidth: 1,\n      data: sellDataExpired,\n      fill: false,\n      radius: 5,\n      borderStyle: 'cross',\n      borderColor: '#a31510'\n    }, {\n      label: 'expired buy',\n      showLine: false,\n      pointBorderWidth: 1,\n      radius: 5,\n      data: buyDataExpired,\n      fill: false,\n      borderStyle: 'cross',\n      borderColor: '#10a366'\n    }]\n  };\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Chart, {\n      type: \"line\",\n      data: basicData,\n      style: {\n        height: 200\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        animation: {\n          duration: 0\n        }\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"p-d-flex\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"p-mr-2\",\n        children: /*#__PURE__*/_jsx(Transactions, {\n          transactions: transactions\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"p-mr-2\",\n        children: \"Item 2\"\n      })]\n    })]\n  });\n}","map":{"version":3,"sources":["/home/mjl/makeMeRich/src/ui/trader.tsx"],"names":["React","Chart","moment","Transactions","trader","pair","data","store","lastPrices","ticks","map","tick","console","log","y","pairs","c","x","unix","timestamp","format","transactions","Object","values","closedTransactions","filter","t","descr","assetPairs","altname","status","volume","vol","cost","fee","time","opentm","date","sort","a","b","sellData","type","price","buyData","sellDataExpired","buyDataExpired","labels","l","basicData","datasets","label","fill","borderColor","showLine","pointBorderWidth","radius","borderStyle","height","responsive","maintainAspectRatio","animation","duration"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Chart } from 'primereact/chart'\nimport moment from 'moment'\nimport Transactions from './transactions'\nexport default function trader({pair,data,store}:{pair:string, data:any ,store:IState}){\n    const lastPrices = store.ticks.map((tick:ITick)=>{\n        console.log(tick)\n        return {\n            y:tick.pairs[pair].c[0],\n            x:moment.unix(tick.timestamp).format(\"HH:mm:ss\")\n        }\n    })\n    const transactions = Object.values(store.closedTransactions)\n\n    .filter(t=>t.descr.pair===store.assetPairs[pair].altname)\n    .map(t=>({\n            ...t.descr,\n            status:t.status,\n            volume:t.vol,\n            cost:t.cost,\n            fee:t.fee,\n            time:t.opentm,\n            date:moment.unix(t.opentm).format(\"YYYY-MM-DD HH:mm:ss\")\n            \n        })\n    ).sort((a,b)=>b.time-a.time)\n    const sellData = transactions\n    .filter(t=>t.type===\"sell\" && t.status===\"closed\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyData = transactions\n    .filter(t=>t.type===\"buy\" && t.status===\"closed\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const sellDataExpired = transactions\n    .filter(t=>t.type===\"sell\" && t.status===\"expired\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const buyDataExpired = transactions\n    .filter(t=>t.type===\"buy\" && t.status===\"expired\")\n    .map(t=>({\n        y:t.price,\n        x: moment.unix(t.time).format(\"HH:mm:ss\")\n    }) )\n    const labels = [ ...store.ticks.map(tick=>tick.timestamp), ...transactions.map(t=>t.time) ].sort().map(l=>moment.unix(l).format(\"HH:mm:ss\"))\n    const basicData = {\n        \n       labels:labels,\n        datasets: [\n            {\n                label: 'price',\n                data:lastPrices,\n                fill: false,\n                borderColor: '#42A5F5'\n            },\n            {\n                label: 'buy',\n                data:buyData,\n                showLine:false,\n                pointBorderWidth:7,\n                fill: false,\n                borderColor: '#10a366'\n            },\n            {\n                label: 'sell',\n                showLine:false,\n                pointBorderWidth:7,\n                data:sellData,\n                fill: false,\n                borderColor: '#a31510'\n            },\n            {\n                label: 'expired sell',\n                showLine:false,\n                pointBorderWidth:1,\n                data:sellDataExpired,\n                fill: false,\n                radius:5,\n\n                borderStyle:'cross',\n                borderColor: '#a31510'\n            },\n            {\n                label: 'expired buy',\n                showLine:false,\n                pointBorderWidth:1,\n                radius:5,\n                data:buyDataExpired,\n                fill: false,\n                borderStyle:'cross',\n                borderColor: '#10a366'\n            },\n           \n        ]\n    }\n    return <>\n   <Chart   type=\"line\" data={basicData} style={{height:200}} options={{\n       responsive:true,  maintainAspectRatio: false,\n    animation:{\n        duration:0\n    }\n}} />\n<div className=\"p-d-flex\">\n<div className=\"p-mr-2\"><Transactions transactions={transactions}/></div>\n    <div className=\"p-mr-2\">Item 2</div>\n</div>\n\n    \n    </>\n}"]},"metadata":{},"sourceType":"module"}