{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Chart } from 'primereact/chart';\nimport moment from 'moment';\nexport default function trader(_ref) {\n  var pair = _ref.pair,\n      data = _ref.data,\n      store = _ref.store;\n  var lastPrices = store.ticks.map(function (tick) {\n    console.log(moment(tick.timestamp).toDate());\n    return {\n      y: tick.pairs[pair].c[0],\n      x: moment(tick.timestamp).toDate()\n    };\n  });\n  var transactions = Object.values(store.closedTransactions).filter(function (t) {\n    return t.descr.pair === pair;\n  }).map(function (t) {\n    return _objectSpread(_objectSpread({}, t.descr), {}, {\n      status: t.status,\n      volume: t.vol,\n      cost: t.cost,\n      fee: t.fee,\n      time: t.opentm\n    });\n  });\n  var basicData = {\n    labels: lastPrices,\n    datasets: [{\n      label: 'price',\n      data: lastPrices,\n      fill: false,\n      borderColor: '#42A5F5'\n    }]\n  };\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Chart, {\n      type: \"line\",\n      data: basicData,\n      style: {\n        height: 200\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false\n      }\n    })\n  });\n}","map":{"version":3,"sources":["/home/mjl/makeMeRich/src/ui/trader.tsx"],"names":["React","Chart","moment","trader","pair","data","store","lastPrices","ticks","map","tick","console","log","timestamp","toDate","y","pairs","c","x","transactions","Object","values","closedTransactions","filter","t","descr","status","volume","vol","cost","fee","time","opentm","basicData","labels","datasets","label","fill","borderColor","height","responsive","maintainAspectRatio"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,eAAe,SAASC,MAAT,OAAwE;AAAA,MAAvDC,IAAuD,QAAvDA,IAAuD;AAAA,MAAlDC,IAAkD,QAAlDA,IAAkD;AAAA,MAA7CC,KAA6C,QAA7CA,KAA6C;AACnF,MAAMC,UAAU,GAAGD,KAAK,CAACE,KAAN,CAAYC,GAAZ,CAAgB,UAACC,IAAD,EAAc;AAC7CC,IAAAA,OAAO,CAACC,GAAR,CAAYV,MAAM,CAACQ,IAAI,CAACG,SAAN,CAAN,CAAuBC,MAAvB,EAAZ;AACA,WAAO;AACHC,MAAAA,CAAC,EAACL,IAAI,CAACM,KAAL,CAAWZ,IAAX,EAAiBa,CAAjB,CAAmB,CAAnB,CADC;AAEHC,MAAAA,CAAC,EAAChB,MAAM,CAACQ,IAAI,CAACG,SAAN,CAAN,CAAuBC,MAAvB;AAFC,KAAP;AAIH,GANkB,CAAnB;AAOA,MAAMK,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcf,KAAK,CAACgB,kBAApB,EACpBC,MADoB,CACb,UAAAC,CAAC;AAAA,WAAEA,CAAC,CAACC,KAAF,CAAQrB,IAAR,KAAeA,IAAjB;AAAA,GADY,EAEpBK,GAFoB,CAEhB,UAAAe,CAAC;AAAA,2CACKA,CAAC,CAACC,KADP;AAEEC,MAAAA,MAAM,EAACF,CAAC,CAACE,MAFX;AAGEC,MAAAA,MAAM,EAACH,CAAC,CAACI,GAHX;AAIEC,MAAAA,IAAI,EAACL,CAAC,CAACK,IAJT;AAKEC,MAAAA,GAAG,EAACN,CAAC,CAACM,GALR;AAMEC,MAAAA,IAAI,EAACP,CAAC,CAACQ;AANT;AAAA,GAFe,CAArB;AAaA,MAAMC,SAAS,GAAG;AAEfC,IAAAA,MAAM,EAAC3B,UAFQ;AAGd4B,IAAAA,QAAQ,EAAE,CACN;AACIC,MAAAA,KAAK,EAAE,OADX;AAEI/B,MAAAA,IAAI,EAACE,UAFT;AAGI8B,MAAAA,IAAI,EAAE,KAHV;AAIIC,MAAAA,WAAW,EAAE;AAJjB,KADM;AAHI,GAAlB;AAaA,sBAAO;AAAA,2BACR,KAAC,KAAD;AAAS,MAAA,IAAI,EAAC,MAAd;AAAqB,MAAA,IAAI,EAAEL,SAA3B;AAAsC,MAAA,KAAK,EAAE;AAACM,QAAAA,MAAM,EAAC;AAAR,OAA7C;AAA2D,MAAA,OAAO,EAAE;AAChEC,QAAAA,UAAU,EAAC,IADqD;AAC9CC,QAAAA,mBAAmB,EAAE;AADyB;AAApE;AADQ,IAAP;AAQH","sourcesContent":["import React from 'react'\nimport { Chart } from 'primereact/chart'\nimport moment from 'moment'\nexport default function trader({pair,data,store}:{pair:string, data:any ,store:IState}){\n    const lastPrices = store.ticks.map((tick:ITick)=>{\n        console.log(moment(tick.timestamp).toDate())\n        return {\n            y:tick.pairs[pair].c[0],\n            x:moment(tick.timestamp).toDate()\n        }\n    })\n    const transactions = Object.values(store.closedTransactions)\n    .filter(t=>t.descr.pair===pair)\n    .map(t=>({\n            ...t.descr,\n            status:t.status,\n            volume:t.vol,\n            cost:t.cost,\n            fee:t.fee,\n            time:t.opentm\n            \n        })\n    )\n     \n    const basicData = {\n        \n       labels:lastPrices,\n        datasets: [\n            {\n                label: 'price',\n                data:lastPrices,\n                fill: false,\n                borderColor: '#42A5F5'\n            },\n           \n        ]\n    }\n    return <>\n   <Chart   type=\"line\" data={basicData} style={{height:200}} options={{\n       responsive:true,  maintainAspectRatio: false,\n\n}} />\n\n    \n    </>\n}"]},"metadata":{},"sourceType":"module"}